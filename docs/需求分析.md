# ClassWeaver 需求分析（V3）

## 1. 目标
- 为中文课堂提供“一站式”备课与陪练：生成课程大纲、测验、练习、讲义。
- 允许教师使用自有资料（知识库）驱动生成，确保内容贴合机构/课程。
- 提供可视化时间线与行动指南，帮助课堂执行与回顾。

## 2. 角色与场景
| 角色        | 主要目标                             | 核心操作                                   |
| ----------- | ------------------------------------ | ------------------------------------------ |
| 教师/教研   | 快速生成大纲、测验、练习与讲义       | 上传资料 → 生成 → 测验/讲义/行动         |
| 助教/陪练   | 课堂陪练、记录事件、触发测验或打印   | 教练模式导航 → 记录事件/发起测验/打印     |
| 学生（可选) | 自测与回顾                           | 进入测验 → 查看得分与讲义                 |

## 3. 功能需求
- 课程生成：文本/PPT 输入，流水线（Planner→Rewriter→Tutor）生成知识点、测验、练习、讲义。
- 知识库：创建/选择库，上传 TXT/PDF/DOCX/PPTX；检索严格限定在当前库（向量召回后二次过滤）。
- 测验与评分：生成测验会话、提交作答、返回得分与诊断；会话可恢复。
- 时间线与行动：事件记录、AI 推荐写入时间线，可拖拽排序；支持绑定行动状态。
- 打印：讲义视图一键打印知识点/题目/练习。
- 会话与登录：Session+CSRF，前端缓存登录态；接口 401 自动清理并要求重新登录。

## 4. 非功能需求
- 语言：默认简体中文；接口携带 `Accept-Language: zh-CN`。
- 性能：前端轮询任务状态 4s 间隔；长列表设置滚动高度。
- 兼容性：Chrome/Edge 最新版，Node 18+，Python 3.10+。
- 数据隔离：用户级隔离的知识库/课程/测验/推荐。

## 5. 约束与假设
- 需提供可用的 LLM/Embedding API（配置 `API_KEY`、模型名）。
- 向量存储默认本地 FAISS；替换存储需适配 `src/kb/store.py`。
- 浏览器本地存储用于缓存任务/对话/测验会话，清理存储会丢失本地历史。***
